(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))t(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&t(r)}).observe(document,{childList:!0,subtree:!0});function i(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerpolicy&&(n.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?n.credentials="include":s.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function t(s){if(s.ep)return;s.ep=!0;const n=i(s);fetch(s.href,n)}})();var z=function(){var m=0,e=document.createElement("div");e.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",e.addEventListener("click",function(c){c.preventDefault(),t(++m%e.children.length)},!1);function i(c){return e.appendChild(c.dom),c}function t(c){for(var h=0;h<e.children.length;h++)e.children[h].style.display=h===c?"block":"none";m=c}var s=(performance||Date).now(),n=s,r=0,a=i(new z.Panel("FPS","#0ff","#002")),l=i(new z.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var d=i(new z.Panel("MB","#f08","#201"));return t(0),{REVISION:16,dom:e,addPanel:i,showPanel:t,begin:function(){s=(performance||Date).now()},end:function(){r++;var c=(performance||Date).now();if(l.update(c-s,200),c>=n+1e3&&(a.update(r*1e3/(c-n),100),n=c,r=0,d)){var h=performance.memory;d.update(h.usedJSHeapSize/1048576,h.jsHeapSizeLimit/1048576)}return c},update:function(){s=this.end()},domElement:e,setMode:t}};z.Panel=function(m,e,i){var t=1/0,s=0,n=Math.round,r=n(window.devicePixelRatio||1),a=80*r,l=48*r,d=3*r,c=2*r,h=3*r,u=15*r,f=74*r,v=30*r,b=document.createElement("canvas");b.width=a,b.height=l,b.style.cssText="width:80px;height:48px";var p=b.getContext("2d");return p.font="bold "+9*r+"px Helvetica,Arial,sans-serif",p.textBaseline="top",p.fillStyle=i,p.fillRect(0,0,a,l),p.fillStyle=e,p.fillText(m,d,c),p.fillRect(h,u,f,v),p.fillStyle=i,p.globalAlpha=.9,p.fillRect(h,u,f,v),{dom:b,update:function(y,E){t=Math.min(t,y),s=Math.max(s,y),p.fillStyle=i,p.globalAlpha=1,p.fillRect(0,0,a,u),p.fillStyle=e,p.fillText(n(y)+" "+m+" ("+n(t)+"-"+n(s)+")",d,c),p.drawImage(b,h+r,u,f-r,v,h,u,f-r,v),p.fillRect(h+f-r,u,r,v),p.fillStyle=i,p.globalAlpha=.9,p.fillRect(h+f-r,u,r,n((1-y/E)*v))}}};/**
 * lil-gui
 * https://lil-gui.georgealways.com
 * @version 0.16.0
 * @author George Michael Brower
 * @license MIT
 */class M{constructor(e,i,t,s,n="div"){this.parent=e,this.object=i,this.property=t,this._disabled=!1,this.initialValue=this.getValue(),this.domElement=document.createElement("div"),this.domElement.classList.add("controller"),this.domElement.classList.add(s),this.$name=document.createElement("div"),this.$name.classList.add("name"),M.nextNameID=M.nextNameID||0,this.$name.id="lil-gui-name-"+ ++M.nextNameID,this.$widget=document.createElement(n),this.$widget.classList.add("widget"),this.$disable=this.$widget,this.domElement.appendChild(this.$name),this.domElement.appendChild(this.$widget),this.parent.children.push(this),this.parent.controllers.push(this),this.parent.$children.appendChild(this.domElement),this._listenCallback=this._listenCallback.bind(this),this.name(t)}name(e){return this._name=e,this.$name.innerHTML=e,this}onChange(e){return this._onChange=e,this}_callOnChange(){this.parent._callOnChange(this),this._onChange!==void 0&&this._onChange.call(this,this.getValue()),this._changed=!0}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(){this._changed&&(this.parent._callOnFinishChange(this),this._onFinishChange!==void 0&&this._onFinishChange.call(this,this.getValue())),this._changed=!1}reset(){return this.setValue(this.initialValue),this._callOnFinishChange(),this}enable(e=!0){return this.disable(!e)}disable(e=!0){return e===this._disabled||(this._disabled=e,this.domElement.classList.toggle("disabled",e),this.$disable.toggleAttribute("disabled",e)),this}options(e){const i=this.parent.add(this.object,this.property,e);return i.name(this._name),this.destroy(),i}min(e){return this}max(e){return this}step(e){return this}listen(e=!0){return this._listening=e,this._listenCallbackID!==void 0&&(cancelAnimationFrame(this._listenCallbackID),this._listenCallbackID=void 0),this._listening&&this._listenCallback(),this}_listenCallback(){this._listenCallbackID=requestAnimationFrame(this._listenCallback),this.updateDisplay()}getValue(){return this.object[this.property]}setValue(e){return this.object[this.property]=e,this._callOnChange(),this.updateDisplay(),this}updateDisplay(){return this}load(e){return this.setValue(e),this._callOnFinishChange(),this}save(){return this.getValue()}destroy(){this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.controllers.splice(this.parent.controllers.indexOf(this),1),this.parent.$children.removeChild(this.domElement)}}class Ne extends M{constructor(e,i,t){super(e,i,t,"boolean","label"),this.$input=document.createElement("input"),this.$input.setAttribute("type","checkbox"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$input.addEventListener("change",()=>{this.setValue(this.$input.checked),this._callOnFinishChange()}),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.checked=this.getValue(),this}}function Q(m){let e,i;return(e=m.match(/(#|0x)?([a-f0-9]{6})/i))?i=e[2]:(e=m.match(/rgb\(\s*(\d*)\s*,\s*(\d*)\s*,\s*(\d*)\s*\)/))?i=parseInt(e[1]).toString(16).padStart(2,0)+parseInt(e[2]).toString(16).padStart(2,0)+parseInt(e[3]).toString(16).padStart(2,0):(e=m.match(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i))&&(i=e[1]+e[1]+e[2]+e[2]+e[3]+e[3]),!!i&&"#"+i}const Ye={isPrimitive:!0,match:m=>typeof m=="string",fromHexString:Q,toHexString:Q},B={isPrimitive:!0,match:m=>typeof m=="number",fromHexString:m=>parseInt(m.substring(1),16),toHexString:m=>"#"+m.toString(16).padStart(6,0)},Ge={isPrimitive:!1,match:Array.isArray,fromHexString(m,e,i=1){const t=B.fromHexString(m);e[0]=(t>>16&255)/255*i,e[1]=(t>>8&255)/255*i,e[2]=(255&t)/255*i},toHexString:([m,e,i],t=1)=>B.toHexString(m*(t=255/t)<<16^e*t<<8^i*t<<0)},Xe={isPrimitive:!1,match:m=>Object(m)===m,fromHexString(m,e,i=1){const t=B.fromHexString(m);e.r=(t>>16&255)/255*i,e.g=(t>>8&255)/255*i,e.b=(255&t)/255*i},toHexString:({r:m,g:e,b:i},t=1)=>B.toHexString(m*(t=255/t)<<16^e*t<<8^i*t<<0)},We=[Ye,B,Ge,Xe];class Ke extends M{constructor(e,i,t,s){var n;super(e,i,t,"color"),this.$input=document.createElement("input"),this.$input.setAttribute("type","color"),this.$input.setAttribute("tabindex",-1),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$text=document.createElement("input"),this.$text.setAttribute("type","text"),this.$text.setAttribute("spellcheck","false"),this.$text.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this.$display.appendChild(this.$input),this.$widget.appendChild(this.$display),this.$widget.appendChild(this.$text),this._format=(n=this.initialValue,We.find(r=>r.match(n))),this._rgbScale=s,this._initialValueHexString=this.save(),this._textFocused=!1,this.$input.addEventListener("input",()=>{this._setValueFromHexString(this.$input.value)}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$text.addEventListener("input",()=>{const r=Q(this.$text.value);r&&this._setValueFromHexString(r)}),this.$text.addEventListener("focus",()=>{this._textFocused=!0,this.$text.select()}),this.$text.addEventListener("blur",()=>{this._textFocused=!1,this.updateDisplay(),this._callOnFinishChange()}),this.$disable=this.$text,this.updateDisplay()}reset(){return this._setValueFromHexString(this._initialValueHexString),this}_setValueFromHexString(e){if(this._format.isPrimitive){const i=this._format.fromHexString(e);this.setValue(i)}else this._format.fromHexString(e,this.getValue(),this._rgbScale),this._callOnChange(),this.updateDisplay()}save(){return this._format.toHexString(this.getValue(),this._rgbScale)}load(e){return this._setValueFromHexString(e),this._callOnFinishChange(),this}updateDisplay(){return this.$input.value=this._format.toHexString(this.getValue(),this._rgbScale),this._textFocused||(this.$text.value=this.$input.value.substring(1)),this.$display.style.backgroundColor=this.$input.value,this}}class K extends M{constructor(e,i,t){super(e,i,t,"function"),this.$button=document.createElement("button"),this.$button.appendChild(this.$name),this.$widget.appendChild(this.$button),this.$button.addEventListener("click",s=>{s.preventDefault(),this.getValue().call(this.object)}),this.$button.addEventListener("touchstart",()=>{}),this.$disable=this.$button}}class Ze extends M{constructor(e,i,t,s,n,r){super(e,i,t,"number"),this._initInput(),this.min(s),this.max(n);const a=r!==void 0;this.step(a?r:this._getImplicitStep(),a),this.updateDisplay()}min(e){return this._min=e,this._onUpdateMinMax(),this}max(e){return this._max=e,this._onUpdateMinMax(),this}step(e,i=!0){return this._step=e,this._stepExplicit=i,this}updateDisplay(){const e=this.getValue();if(this._hasSlider){let i=(e-this._min)/(this._max-this._min);i=Math.max(0,Math.min(i,1)),this.$fill.style.width=100*i+"%"}return this._inputFocused||(this.$input.value=e),this}_initInput(){this.$input=document.createElement("input"),this.$input.setAttribute("type","number"),this.$input.setAttribute("step","any"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$disable=this.$input;const e=c=>{const h=parseFloat(this.$input.value);isNaN(h)||(this._snapClampSetValue(h+c),this.$input.value=this.getValue())};let i,t,s,n,r,a=!1;const l=c=>{if(a){const h=c.clientX-i,u=c.clientY-t;Math.abs(u)>5?(c.preventDefault(),this.$input.blur(),a=!1,this._setDraggingStyle(!0,"vertical")):Math.abs(h)>5&&d()}a||(r-=(c.clientY-s)*this._step*this._arrowKeyMultiplier(c),n+r>this._max?r=this._max-n:n+r<this._min&&(r=this._min-n),this._snapClampSetValue(n+r)),s=c.clientY},d=()=>{this._setDraggingStyle(!1,"vertical"),this._callOnFinishChange(),window.removeEventListener("mousemove",l),window.removeEventListener("mouseup",d)};this.$input.addEventListener("input",()=>{const c=parseFloat(this.$input.value);isNaN(c)||this.setValue(this._clamp(c))}),this.$input.addEventListener("keydown",c=>{c.code==="Enter"&&this.$input.blur(),c.code==="ArrowUp"&&(c.preventDefault(),e(this._step*this._arrowKeyMultiplier(c))),c.code==="ArrowDown"&&(c.preventDefault(),e(this._step*this._arrowKeyMultiplier(c)*-1))}),this.$input.addEventListener("wheel",c=>{this._inputFocused&&(c.preventDefault(),e(this._step*this._normalizeMouseWheel(c)))}),this.$input.addEventListener("mousedown",c=>{i=c.clientX,t=s=c.clientY,a=!0,n=this.getValue(),r=0,window.addEventListener("mousemove",l),window.addEventListener("mouseup",d)}),this.$input.addEventListener("focus",()=>{this._inputFocused=!0}),this.$input.addEventListener("blur",()=>{this._inputFocused=!1,this.updateDisplay(),this._callOnFinishChange()})}_initSlider(){this._hasSlider=!0,this.$slider=document.createElement("div"),this.$slider.classList.add("slider"),this.$fill=document.createElement("div"),this.$fill.classList.add("fill"),this.$slider.appendChild(this.$fill),this.$widget.insertBefore(this.$slider,this.$input),this.domElement.classList.add("hasSlider");const e=u=>{const f=this.$slider.getBoundingClientRect();let v=(b=u,p=f.left,y=f.right,E=this._min,x=this._max,(b-p)/(y-p)*(x-E)+E);var b,p,y,E,x;this._snapClampSetValue(v)},i=u=>{e(u.clientX)},t=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("mousemove",i),window.removeEventListener("mouseup",t)};let s,n,r=!1;const a=u=>{u.preventDefault(),this._setDraggingStyle(!0),e(u.touches[0].clientX),r=!1},l=u=>{if(r){const f=u.touches[0].clientX-s,v=u.touches[0].clientY-n;Math.abs(f)>Math.abs(v)?a(u):(window.removeEventListener("touchmove",l),window.removeEventListener("touchend",d))}else u.preventDefault(),e(u.touches[0].clientX)},d=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("touchmove",l),window.removeEventListener("touchend",d)},c=this._callOnFinishChange.bind(this);let h;this.$slider.addEventListener("mousedown",u=>{this._setDraggingStyle(!0),e(u.clientX),window.addEventListener("mousemove",i),window.addEventListener("mouseup",t)}),this.$slider.addEventListener("touchstart",u=>{u.touches.length>1||(this._hasScrollBar?(s=u.touches[0].clientX,n=u.touches[0].clientY,r=!0):a(u),window.addEventListener("touchmove",l),window.addEventListener("touchend",d))}),this.$slider.addEventListener("wheel",u=>{if(Math.abs(u.deltaX)<Math.abs(u.deltaY)&&this._hasScrollBar)return;u.preventDefault();const f=this._normalizeMouseWheel(u)*this._step;this._snapClampSetValue(this.getValue()+f),this.$input.value=this.getValue(),clearTimeout(h),h=setTimeout(c,400)})}_setDraggingStyle(e,i="horizontal"){this.$slider&&this.$slider.classList.toggle("active",e),document.body.classList.toggle("lil-gui-dragging",e),document.body.classList.toggle("lil-gui-"+i,e)}_getImplicitStep(){return this._hasMin&&this._hasMax?(this._max-this._min)/1e3:.1}_onUpdateMinMax(){!this._hasSlider&&this._hasMin&&this._hasMax&&(this._stepExplicit||this.step(this._getImplicitStep(),!1),this._initSlider(),this.updateDisplay())}_normalizeMouseWheel(e){let{deltaX:i,deltaY:t}=e;return Math.floor(e.deltaY)!==e.deltaY&&e.wheelDelta&&(i=0,t=-e.wheelDelta/120,t*=this._stepExplicit?1:10),i+-t}_arrowKeyMultiplier(e){let i=this._stepExplicit?1:10;return e.shiftKey?i*=10:e.altKey&&(i/=10),i}_snap(e){const i=Math.round(e/this._step)*this._step;return parseFloat(i.toPrecision(15))}_clamp(e){return e<this._min&&(e=this._min),e>this._max&&(e=this._max),e}_snapClampSetValue(e){this.setValue(this._clamp(this._snap(e)))}get _hasScrollBar(){const e=this.parent.root.$children;return e.scrollHeight>e.clientHeight}get _hasMin(){return this._min!==void 0}get _hasMax(){return this._max!==void 0}}class Je extends M{constructor(e,i,t,s){super(e,i,t,"option"),this.$select=document.createElement("select"),this.$select.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this._values=Array.isArray(s)?s:Object.values(s),this._names=Array.isArray(s)?s:Object.keys(s),this._names.forEach(n=>{const r=document.createElement("option");r.innerHTML=n,this.$select.appendChild(r)}),this.$select.addEventListener("change",()=>{this.setValue(this._values[this.$select.selectedIndex]),this._callOnFinishChange()}),this.$select.addEventListener("focus",()=>{this.$display.classList.add("focus")}),this.$select.addEventListener("blur",()=>{this.$display.classList.remove("focus")}),this.$widget.appendChild(this.$select),this.$widget.appendChild(this.$display),this.$disable=this.$select,this.updateDisplay()}updateDisplay(){const e=this.getValue(),i=this._values.indexOf(e);return this.$select.selectedIndex=i,this.$display.innerHTML=i===-1?e:this._names[i],this}}class Qe extends M{constructor(e,i,t){super(e,i,t,"string"),this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$input.addEventListener("input",()=>{this.setValue(this.$input.value)}),this.$input.addEventListener("keydown",s=>{s.code==="Enter"&&this.$input.blur()}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$widget.appendChild(this.$input),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.value=this.getValue(),this}}let ve=!1;class ee{constructor({parent:e,autoPlace:i=e===void 0,container:t,width:s,title:n="Controls",injectStyles:r=!0,touchStyles:a=!0}={}){if(this.parent=e,this.root=e?e.root:this,this.children=[],this.controllers=[],this.folders=[],this._closed=!1,this._hidden=!1,this.domElement=document.createElement("div"),this.domElement.classList.add("lil-gui"),this.$title=document.createElement("div"),this.$title.classList.add("title"),this.$title.setAttribute("role","button"),this.$title.setAttribute("aria-expanded",!0),this.$title.setAttribute("tabindex",0),this.$title.addEventListener("click",()=>this.openAnimated(this._closed)),this.$title.addEventListener("keydown",l=>{l.code!=="Enter"&&l.code!=="Space"||(l.preventDefault(),this.$title.click())}),this.$title.addEventListener("touchstart",()=>{}),this.$children=document.createElement("div"),this.$children.classList.add("children"),this.domElement.appendChild(this.$title),this.domElement.appendChild(this.$children),this.title(n),a&&this.domElement.classList.add("allow-touch-styles"),this.parent)return this.parent.children.push(this),this.parent.folders.push(this),void this.parent.$children.appendChild(this.domElement);this.domElement.classList.add("root"),!ve&&r&&(function(l){const d=document.createElement("style");d.innerHTML=l;const c=document.querySelector("head link[rel=stylesheet], head style");c?document.head.insertBefore(d,c):document.head.appendChild(d)}('.lil-gui{--background-color:#1f1f1f;--text-color:#ebebeb;--title-background-color:#111;--title-text-color:#ebebeb;--widget-color:#424242;--hover-color:#4f4f4f;--focus-color:#595959;--number-color:#2cc9ff;--string-color:#a2db3c;--font-size:11px;--input-font-size:11px;--font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;--font-family-mono:Menlo,Monaco,Consolas,"Droid Sans Mono",monospace;--padding:4px;--spacing:4px;--widget-height:20px;--name-width:45%;--slider-knob-width:2px;--slider-input-width:27%;--color-input-width:27%;--slider-input-min-width:45px;--color-input-min-width:45px;--folder-indent:7px;--widget-padding:0 0 0 3px;--widget-border-radius:2px;--checkbox-size:calc(var(--widget-height)*0.75);--scrollbar-width:5px;background-color:var(--background-color);color:var(--text-color);font-family:var(--font-family);font-size:var(--font-size);font-style:normal;font-weight:400;line-height:1;text-align:left;touch-action:manipulation;user-select:none;-webkit-user-select:none}.lil-gui,.lil-gui *{box-sizing:border-box;margin:0;padding:0}.lil-gui.root{display:flex;flex-direction:column;width:var(--width,245px)}.lil-gui.root>.title{background:var(--title-background-color);color:var(--title-text-color)}.lil-gui.root>.children{overflow-x:hidden;overflow-y:auto}.lil-gui.root>.children::-webkit-scrollbar{background:var(--background-color);height:var(--scrollbar-width);width:var(--scrollbar-width)}.lil-gui.root>.children::-webkit-scrollbar-thumb{background:var(--focus-color);border-radius:var(--scrollbar-width)}.lil-gui.force-touch-styles{--widget-height:28px;--padding:6px;--spacing:6px;--font-size:13px;--input-font-size:16px;--folder-indent:10px;--scrollbar-width:7px;--slider-input-min-width:50px;--color-input-min-width:65px}.lil-gui.autoPlace{max-height:100%;position:fixed;right:15px;top:0;z-index:1001}.lil-gui .controller{align-items:center;display:flex;margin:var(--spacing) 0;padding:0 var(--padding)}.lil-gui .controller.disabled{opacity:.5}.lil-gui .controller.disabled,.lil-gui .controller.disabled *{pointer-events:none!important}.lil-gui .controller>.name{flex-shrink:0;line-height:var(--widget-height);min-width:var(--name-width);padding-right:var(--spacing);white-space:pre}.lil-gui .controller .widget{align-items:center;display:flex;min-height:var(--widget-height);position:relative;width:100%}.lil-gui .controller.string input{color:var(--string-color)}.lil-gui .controller.boolean .widget{cursor:pointer}.lil-gui .controller.color .display{border-radius:var(--widget-border-radius);height:var(--widget-height);position:relative;width:100%}.lil-gui .controller.color input[type=color]{cursor:pointer;height:100%;opacity:0;width:100%}.lil-gui .controller.color input[type=text]{flex-shrink:0;font-family:var(--font-family-mono);margin-left:var(--spacing);min-width:var(--color-input-min-width);width:var(--color-input-width)}.lil-gui .controller.option select{max-width:100%;opacity:0;position:absolute;width:100%}.lil-gui .controller.option .display{background:var(--widget-color);border-radius:var(--widget-border-radius);height:var(--widget-height);line-height:var(--widget-height);max-width:100%;overflow:hidden;padding-left:.55em;padding-right:1.75em;pointer-events:none;position:relative;word-break:break-all}.lil-gui .controller.option .display.active{background:var(--focus-color)}.lil-gui .controller.option .display:after{bottom:0;content:"\u2195";font-family:lil-gui;padding-right:.375em;position:absolute;right:0;top:0}.lil-gui .controller.option .widget,.lil-gui .controller.option select{cursor:pointer}.lil-gui .controller.number input{color:var(--number-color)}.lil-gui .controller.number.hasSlider input{flex-shrink:0;margin-left:var(--spacing);min-width:var(--slider-input-min-width);width:var(--slider-input-width)}.lil-gui .controller.number .slider{background-color:var(--widget-color);border-radius:var(--widget-border-radius);cursor:ew-resize;height:var(--widget-height);overflow:hidden;padding-right:var(--slider-knob-width);touch-action:pan-y;width:100%}.lil-gui .controller.number .slider.active{background-color:var(--focus-color)}.lil-gui .controller.number .slider.active .fill{opacity:.95}.lil-gui .controller.number .fill{border-right:var(--slider-knob-width) solid var(--number-color);box-sizing:content-box;height:100%}.lil-gui-dragging .lil-gui{--hover-color:var(--widget-color)}.lil-gui-dragging *{cursor:ew-resize!important}.lil-gui-dragging.lil-gui-vertical *{cursor:ns-resize!important}.lil-gui .title{--title-height:calc(var(--widget-height) + var(--spacing)*1.25);-webkit-tap-highlight-color:transparent;text-decoration-skip:objects;cursor:pointer;font-weight:600;height:var(--title-height);line-height:calc(var(--title-height) - 4px);outline:none;padding:0 var(--padding)}.lil-gui .title:before{content:"\u25BE";display:inline-block;font-family:lil-gui;padding-right:2px}.lil-gui .title:active{background:var(--title-background-color);opacity:.75}.lil-gui.root>.title:focus{text-decoration:none!important}.lil-gui.closed>.title:before{content:"\u25B8"}.lil-gui.closed>.children{opacity:0;transform:translateY(-7px)}.lil-gui.closed:not(.transition)>.children{display:none}.lil-gui.transition>.children{overflow:hidden;pointer-events:none;transition-duration:.3s;transition-property:height,opacity,transform;transition-timing-function:cubic-bezier(.2,.6,.35,1)}.lil-gui .children:empty:before{content:"Empty";display:block;font-style:italic;height:var(--widget-height);line-height:var(--widget-height);margin:var(--spacing) 0;opacity:.5;padding:0 var(--padding)}.lil-gui.root>.children>.lil-gui>.title{border-width:0;border-bottom:1px solid var(--widget-color);border-left:0 solid var(--widget-color);border-right:0 solid var(--widget-color);border-top:1px solid var(--widget-color);transition:border-color .3s}.lil-gui.root>.children>.lil-gui.closed>.title{border-bottom-color:transparent}.lil-gui+.controller{border-top:1px solid var(--widget-color);margin-top:0;padding-top:var(--spacing)}.lil-gui .lil-gui .lil-gui>.title{border:none}.lil-gui .lil-gui .lil-gui>.children{border:none;border-left:2px solid var(--widget-color);margin-left:var(--folder-indent)}.lil-gui .lil-gui .controller{border:none}.lil-gui input{-webkit-tap-highlight-color:transparent;background:var(--widget-color);border:0;border-radius:var(--widget-border-radius);color:var(--text-color);font-family:var(--font-family);font-size:var(--input-font-size);height:var(--widget-height);outline:none;width:100%}.lil-gui input:disabled{opacity:1}.lil-gui input[type=number],.lil-gui input[type=text]{padding:var(--widget-padding)}.lil-gui input[type=number]:focus,.lil-gui input[type=text]:focus{background:var(--focus-color)}.lil-gui input::-webkit-inner-spin-button,.lil-gui input::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.lil-gui input[type=number]{-moz-appearance:textfield}.lil-gui input[type=checkbox]{appearance:none;-webkit-appearance:none;border-radius:var(--widget-border-radius);cursor:pointer;height:var(--checkbox-size);text-align:center;width:var(--checkbox-size)}.lil-gui input[type=checkbox]:checked:before{content:"\u2713";font-family:lil-gui;font-size:var(--checkbox-size);line-height:var(--checkbox-size)}.lil-gui button{-webkit-tap-highlight-color:transparent;background:var(--widget-color);border:1px solid var(--widget-color);border-radius:var(--widget-border-radius);color:var(--text-color);cursor:pointer;font-family:var(--font-family);font-size:var(--font-size);height:var(--widget-height);line-height:calc(var(--widget-height) - 4px);outline:none;text-align:center;text-transform:none;width:100%}.lil-gui button:active{background:var(--focus-color)}@font-face{font-family:lil-gui;src:url("data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAUsAAsAAAAACJwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAH4AAADAImwmYE9TLzIAAAGIAAAAPwAAAGBKqH5SY21hcAAAAcgAAAD0AAACrukyyJBnbHlmAAACvAAAAF8AAACEIZpWH2hlYWQAAAMcAAAAJwAAADZfcj2zaGhlYQAAA0QAAAAYAAAAJAC5AHhobXR4AAADXAAAABAAAABMAZAAAGxvY2EAAANsAAAAFAAAACgCEgIybWF4cAAAA4AAAAAeAAAAIAEfABJuYW1lAAADoAAAASIAAAIK9SUU/XBvc3QAAATEAAAAZgAAAJCTcMc2eJxVjbEOgjAURU+hFRBK1dGRL+ALnAiToyMLEzFpnPz/eAshwSa97517c/MwwJmeB9kwPl+0cf5+uGPZXsqPu4nvZabcSZldZ6kfyWnomFY/eScKqZNWupKJO6kXN3K9uCVoL7iInPr1X5baXs3tjuMqCtzEuagm/AAlzQgPAAB4nGNgYRBlnMDAysDAYM/gBiT5oLQBAwuDJAMDEwMrMwNWEJDmmsJwgCFeXZghBcjlZMgFCzOiKOIFAB71Bb8AeJy1kjFuwkAQRZ+DwRAwBtNQRUGKQ8OdKCAWUhAgKLhIuAsVSpWz5Bbkj3dEgYiUIszqWdpZe+Z7/wB1oCYmIoboiwiLT2WjKl/jscrHfGg/pKdMkyklC5Zs2LEfHYpjcRoPzme9MWWmk3dWbK9ObkWkikOetJ554fWyoEsmdSlt+uR0pCJR34b6t/TVg1SY3sYvdf8vuiKrpyaDXDISiegp17p7579Gp3p++y7HPAiY9pmTibljrr85qSidtlg4+l25GLCaS8e6rRxNBmsnERunKbaOObRz7N72ju5vdAjYpBXHgJylOAVsMseDAPEP8LYoUHicY2BiAAEfhiAGJgZWBgZ7RnFRdnVJELCQlBSRlATJMoLV2DK4glSYs6ubq5vbKrJLSbGrgEmovDuDJVhe3VzcXFwNLCOILB/C4IuQ1xTn5FPilBTj5FPmBAB4WwoqAHicY2BkYGAA4sk1sR/j+W2+MnAzpDBgAyEMQUCSg4EJxAEAwUgFHgB4nGNgZGBgSGFggJMhDIwMqEAYAByHATJ4nGNgAIIUNEwmAABl3AGReJxjYAACIQYlBiMGJ3wQAEcQBEV4nGNgZGBgEGZgY2BiAAEQyQWEDAz/wXwGAAsPATIAAHicXdBNSsNAHAXwl35iA0UQXYnMShfS9GPZA7T7LgIu03SSpkwzYTIt1BN4Ak/gKTyAeCxfw39jZkjymzcvAwmAW/wgwHUEGDb36+jQQ3GXGot79L24jxCP4gHzF/EIr4jEIe7wxhOC3g2TMYy4Q7+Lu/SHuEd/ivt4wJd4wPxbPEKMX3GI5+DJFGaSn4qNzk8mcbKSR6xdXdhSzaOZJGtdapd4vVPbi6rP+cL7TGXOHtXKll4bY1Xl7EGnPtp7Xy2n00zyKLVHfkHBa4IcJ2oD3cgggWvt/V/FbDrUlEUJhTn/0azVWbNTNr0Ens8de1tceK9xZmfB1CPjOmPH4kitmvOubcNpmVTN3oFJyjzCvnmrwhJTzqzVj9jiSX911FjeAAB4nG3HMRKCMBBA0f0giiKi4DU8k0V2GWbIZDOh4PoWWvq6J5V8If9NVNQcaDhyouXMhY4rPTcG7jwYmXhKq8Wz+p762aNaeYXom2n3m2dLTVgsrCgFJ7OTmIkYbwIbC6vIB7WmFfAAAA==") format("woff")}@media (pointer:coarse){.lil-gui.allow-touch-styles{--widget-height:28px;--padding:6px;--spacing:6px;--font-size:13px;--input-font-size:16px;--folder-indent:10px;--scrollbar-width:7px;--slider-input-min-width:50px;--color-input-min-width:65px}}@media (hover:hover){.lil-gui .controller.color .display:hover:before{border:1px solid #fff9;border-radius:var(--widget-border-radius);bottom:0;content:" ";display:block;left:0;position:absolute;right:0;top:0}.lil-gui .controller.option .display.focus{background:var(--focus-color)}.lil-gui .controller.option .widget:hover .display{background:var(--hover-color)}.lil-gui .controller.number .slider:hover{background-color:var(--hover-color)}body:not(.lil-gui-dragging) .lil-gui .title:hover{background:var(--title-background-color);opacity:.85}.lil-gui .title:focus{text-decoration:underline var(--focus-color)}.lil-gui input:hover{background:var(--hover-color)}.lil-gui input:active{background:var(--focus-color)}.lil-gui input[type=checkbox]:focus{box-shadow:inset 0 0 0 1px var(--focus-color)}.lil-gui button:hover{background:var(--hover-color);border-color:var(--hover-color)}.lil-gui button:focus{border-color:var(--focus-color)}}'),ve=!0),t?t.appendChild(this.domElement):i&&(this.domElement.classList.add("autoPlace"),document.body.appendChild(this.domElement)),s&&this.domElement.style.setProperty("--width",s+"px"),this.domElement.addEventListener("keydown",l=>l.stopPropagation()),this.domElement.addEventListener("keyup",l=>l.stopPropagation())}add(e,i,t,s,n){if(Object(t)===t)return new Je(this,e,i,t);const r=e[i];switch(typeof r){case"number":return new Ze(this,e,i,t,s,n);case"boolean":return new Ne(this,e,i);case"string":return new Qe(this,e,i);case"function":return new K(this,e,i)}console.error(`gui.add failed
	property:`,i,`
	object:`,e,`
	value:`,r)}addColor(e,i,t=1){return new Ke(this,e,i,t)}addFolder(e){return new ee({parent:this,title:e})}load(e,i=!0){return e.controllers&&this.controllers.forEach(t=>{t instanceof K||t._name in e.controllers&&t.load(e.controllers[t._name])}),i&&e.folders&&this.folders.forEach(t=>{t._title in e.folders&&t.load(e.folders[t._title])}),this}save(e=!0){const i={controllers:{},folders:{}};return this.controllers.forEach(t=>{if(!(t instanceof K)){if(t._name in i.controllers)throw new Error(`Cannot save GUI with duplicate property "${t._name}"`);i.controllers[t._name]=t.save()}}),e&&this.folders.forEach(t=>{if(t._title in i.folders)throw new Error(`Cannot save GUI with duplicate folder "${t._title}"`);i.folders[t._title]=t.save()}),i}open(e=!0){return this._closed=!e,this.$title.setAttribute("aria-expanded",!this._closed),this.domElement.classList.toggle("closed",this._closed),this}close(){return this.open(!1)}show(e=!0){return this._hidden=!e,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}openAnimated(e=!0){return this._closed=!e,this.$title.setAttribute("aria-expanded",!this._closed),requestAnimationFrame(()=>{const i=this.$children.clientHeight;this.$children.style.height=i+"px",this.domElement.classList.add("transition");const t=n=>{n.target===this.$children&&(this.$children.style.height="",this.domElement.classList.remove("transition"),this.$children.removeEventListener("transitionend",t))};this.$children.addEventListener("transitionend",t);const s=e?this.$children.scrollHeight:0;this.domElement.classList.toggle("closed",!e),requestAnimationFrame(()=>{this.$children.style.height=s+"px"})}),this}title(e){return this._title=e,this.$title.innerHTML=e,this}reset(e=!0){return(e?this.controllersRecursive():this.controllers).forEach(i=>i.reset()),this}onChange(e){return this._onChange=e,this}_callOnChange(e){this.parent&&this.parent._callOnChange(e),this._onChange!==void 0&&this._onChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(e){this.parent&&this.parent._callOnFinishChange(e),this._onFinishChange!==void 0&&this._onFinishChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}destroy(){this.parent&&(this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.folders.splice(this.parent.folders.indexOf(this),1)),this.domElement.parentElement&&this.domElement.parentElement.removeChild(this.domElement),Array.from(this.children).forEach(e=>e.destroy())}controllersRecursive(){let e=Array.from(this.controllers);return this.folders.forEach(i=>{e=e.concat(i.controllersRecursive())}),e}foldersRecursive(){let e=Array.from(this.folders);return this.folders.forEach(i=>{e=e.concat(i.foldersRecursive())}),e}}const qe=/^[og]\s*(.+)?/,et=/^mtllib /,tt=/^usemtl /,it=/^usemap /,we=/\s+/,ye=new THREE.Vector3,Z=new THREE.Vector3,Ae=new THREE.Vector3,xe=new THREE.Vector3,L=new THREE.Vector3,N=new THREE.Color;function st(){const m={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,i){if(this.object&&this.object.fromDeclaration===!1){this.object.name=e,this.object.fromDeclaration=i!==!1;return}const t=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:i!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(s,n){const r=this._finalize(!1);r&&(r.inherited||r.groupCount<=0)&&this.materials.splice(r.index,1);const a={index:this.materials.length,name:s||"",mtllib:Array.isArray(n)&&n.length>0?n[n.length-1]:"",smooth:r!==void 0?r.smooth:this.smooth,groupStart:r!==void 0?r.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(l){const d={index:typeof l=="number"?l:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return d.clone=this.clone.bind(d),d}};return this.materials.push(a),a},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(s){const n=this.currentMaterial();if(n&&n.groupEnd===-1&&(n.groupEnd=this.geometry.vertices.length/3,n.groupCount=n.groupEnd-n.groupStart,n.inherited=!1),s&&this.materials.length>1)for(let r=this.materials.length-1;r>=0;r--)this.materials[r].groupCount<=0&&this.materials.splice(r,1);return s&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),n}},t&&t.name&&typeof t.clone=="function"){const s=t.clone(0);s.inherited=!0,this.object.materials.push(s)}this.objects.push(this.object)},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(e,i){const t=parseInt(e,10);return(t>=0?t-1:t+i/3)*3},parseNormalIndex:function(e,i){const t=parseInt(e,10);return(t>=0?t-1:t+i/3)*3},parseUVIndex:function(e,i){const t=parseInt(e,10);return(t>=0?t-1:t+i/2)*2},addVertex:function(e,i,t){const s=this.vertices,n=this.object.geometry.vertices;n.push(s[e+0],s[e+1],s[e+2]),n.push(s[i+0],s[i+1],s[i+2]),n.push(s[t+0],s[t+1],s[t+2])},addVertexPoint:function(e){const i=this.vertices;this.object.geometry.vertices.push(i[e+0],i[e+1],i[e+2])},addVertexLine:function(e){const i=this.vertices;this.object.geometry.vertices.push(i[e+0],i[e+1],i[e+2])},addNormal:function(e,i,t){const s=this.normals,n=this.object.geometry.normals;n.push(s[e+0],s[e+1],s[e+2]),n.push(s[i+0],s[i+1],s[i+2]),n.push(s[t+0],s[t+1],s[t+2])},addFaceNormal:function(e,i,t){const s=this.vertices,n=this.object.geometry.normals;ye.fromArray(s,e),Z.fromArray(s,i),Ae.fromArray(s,t),L.subVectors(Ae,Z),xe.subVectors(ye,Z),L.cross(xe),L.normalize(),n.push(L.x,L.y,L.z),n.push(L.x,L.y,L.z),n.push(L.x,L.y,L.z)},addColor:function(e,i,t){const s=this.colors,n=this.object.geometry.colors;s[e]!==void 0&&n.push(s[e+0],s[e+1],s[e+2]),s[i]!==void 0&&n.push(s[i+0],s[i+1],s[i+2]),s[t]!==void 0&&n.push(s[t+0],s[t+1],s[t+2])},addUV:function(e,i,t){const s=this.uvs,n=this.object.geometry.uvs;n.push(s[e+0],s[e+1]),n.push(s[i+0],s[i+1]),n.push(s[t+0],s[t+1])},addDefaultUV:function(){const e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){const i=this.uvs;this.object.geometry.uvs.push(i[e+0],i[e+1])},addFace:function(e,i,t,s,n,r,a,l,d){const c=this.vertices.length;let h=this.parseVertexIndex(e,c),u=this.parseVertexIndex(i,c),f=this.parseVertexIndex(t,c);if(this.addVertex(h,u,f),this.addColor(h,u,f),a!==void 0&&a!==""){const v=this.normals.length;h=this.parseNormalIndex(a,v),u=this.parseNormalIndex(l,v),f=this.parseNormalIndex(d,v),this.addNormal(h,u,f)}else this.addFaceNormal(h,u,f);if(s!==void 0&&s!==""){const v=this.uvs.length;h=this.parseUVIndex(s,v),u=this.parseUVIndex(n,v),f=this.parseUVIndex(r,v),this.addUV(h,u,f),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";const i=this.vertices.length;for(let t=0,s=e.length;t<s;t++){const n=this.parseVertexIndex(e[t],i);this.addVertexPoint(n),this.addColor(n)}},addLineGeometry:function(e,i){this.object.geometry.type="Line";const t=this.vertices.length,s=this.uvs.length;for(let n=0,r=e.length;n<r;n++)this.addVertexLine(this.parseVertexIndex(e[n],t));for(let n=0,r=i.length;n<r;n++)this.addUVLine(this.parseUVIndex(i[n],s))}};return m.startObject("",!1),m}class nt extends THREE.Loader{constructor(e){super(e),this.materials=null}load(e,i,t,s){const n=this,r=new THREE.FileLoader(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(e,function(a){try{i(n.parse(a))}catch(l){s?s(l):console.error(l),n.manager.itemError(e)}},t,s)}setMaterials(e){return this.materials=e,this}parse(e){const i=new st;e.indexOf(`\r
`)!==-1&&(e=e.replace(/\r\n/g,`
`)),e.indexOf(`\\
`)!==-1&&(e=e.replace(/\\\n/g,""));const t=e.split(`
`);let s=[];for(let a=0,l=t.length;a<l;a++){const d=t[a].trimStart();if(d.length===0)continue;const c=d.charAt(0);if(c!=="#")if(c==="v"){const h=d.split(we);switch(h[0]){case"v":i.vertices.push(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3])),h.length>=7?(N.setRGB(parseFloat(h[4]),parseFloat(h[5]),parseFloat(h[6])).convertSRGBToLinear(),i.colors.push(N.r,N.g,N.b)):i.colors.push(void 0,void 0,void 0);break;case"vn":i.normals.push(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3]));break;case"vt":i.uvs.push(parseFloat(h[1]),parseFloat(h[2]));break}}else if(c==="f"){const u=d.slice(1).trim().split(we),f=[];for(let b=0,p=u.length;b<p;b++){const y=u[b];if(y.length>0){const E=y.split("/");f.push(E)}}const v=f[0];for(let b=1,p=f.length-1;b<p;b++){const y=f[b],E=f[b+1];i.addFace(v[0],y[0],E[0],v[1],y[1],E[1],v[2],y[2],E[2])}}else if(c==="l"){const h=d.substring(1).trim().split(" ");let u=[];const f=[];if(d.indexOf("/")===-1)u=h;else for(let v=0,b=h.length;v<b;v++){const p=h[v].split("/");p[0]!==""&&u.push(p[0]),p[1]!==""&&f.push(p[1])}i.addLineGeometry(u,f)}else if(c==="p"){const u=d.slice(1).trim().split(" ");i.addPointGeometry(u)}else if((s=qe.exec(d))!==null){const h=(" "+s[0].slice(1).trim()).slice(1);i.startObject(h)}else if(tt.test(d))i.object.startMaterial(d.substring(7).trim(),i.materialLibraries);else if(et.test(d))i.materialLibraries.push(d.substring(7).trim());else if(it.test(d))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if(c==="s"){if(s=d.split(" "),s.length>1){const u=s[1].trim().toLowerCase();i.object.smooth=u!=="0"&&u!=="off"}else i.object.smooth=!0;const h=i.object.currentMaterial();h&&(h.smooth=i.object.smooth)}else{if(d==="\0")continue;console.warn('THREE.OBJLoader: Unexpected line: "'+d+'"')}}i.finalize();const n=new THREE.Group;if(n.materialLibraries=[].concat(i.materialLibraries),!(i.objects.length===1&&i.objects[0].geometry.vertices.length===0)===!0)for(let a=0,l=i.objects.length;a<l;a++){const d=i.objects[a],c=d.geometry,h=d.materials,u=c.type==="Line",f=c.type==="Points";let v=!1;if(c.vertices.length===0)continue;const b=new THREE.BufferGeometry;b.setAttribute("position",new THREE.Float32BufferAttribute(c.vertices,3)),c.normals.length>0&&b.setAttribute("normal",new THREE.Float32BufferAttribute(c.normals,3)),c.colors.length>0&&(v=!0,b.setAttribute("color",new THREE.Float32BufferAttribute(c.colors,3))),c.hasUVIndices===!0&&b.setAttribute("uv",new THREE.Float32BufferAttribute(c.uvs,2));const p=[];for(let E=0,x=h.length;E<x;E++){const _=h[E],w=_.name+"_"+_.smooth+"_"+v;let A=i.materials[w];if(this.materials!==null){if(A=this.materials.create(_.name),u&&A&&!(A instanceof THREE.LineBasicMaterial)){const R=new THREE.LineBasicMaterial;THREE.Material.prototype.copy.call(R,A),R.color.copy(A.color),A=R}else if(f&&A&&!(A instanceof THREE.PointsMaterial)){const R=new THREE.PointsMaterial({size:10,sizeAttenuation:!1});THREE.Material.prototype.copy.call(R,A),R.color.copy(A.color),R.map=A.map,A=R}}A===void 0&&(u?A=new THREE.LineBasicMaterial:f?A=new THREE.PointsMaterial({size:1,sizeAttenuation:!1}):A=new THREE.MeshPhongMaterial,A.name=_.name,A.flatShading=!_.smooth,A.vertexColors=v,i.materials[w]=A),p.push(A)}let y;if(p.length>1){for(let E=0,x=h.length;E<x;E++){const _=h[E];b.addGroup(_.groupStart,_.groupCount,E)}u?y=new THREE.LineSegments(b,p):f?y=new THREE.Points(b,p):y=new THREE.Mesh(b,p)}else u?y=new THREE.LineSegments(b,p[0]):f?y=new THREE.Points(b,p[0]):y=new THREE.Mesh(b,p[0]);y.name=d.name,n.add(y)}else if(i.vertices.length>0){const a=new THREE.PointsMaterial({size:1,sizeAttenuation:!1}),l=new THREE.BufferGeometry;l.setAttribute("position",new THREE.Float32BufferAttribute(i.vertices,3)),i.colors.length>0&&i.colors[0]!==void 0&&(l.setAttribute("color",new THREE.Float32BufferAttribute(i.colors,3)),a.vertexColors=!0);const d=new THREE.Points(l,a);n.add(d)}return n}}class ot extends THREE.Loader{constructor(e){super(e)}load(e,i,t,s){const n=this,r=this.path===""?THREE.LoaderUtils.extractUrlBase(e):this.path,a=new THREE.FileLoader(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){try{i(n.parse(l,r))}catch(d){s?s(d):console.error(d),n.manager.itemError(e)}},t,s)}setMaterialOptions(e){return this.materialOptions=e,this}parse(e,i){const t=e.split(`
`);let s={};const n=/\s+/,r={};for(let l=0;l<t.length;l++){let d=t[l];if(d=d.trim(),d.length===0||d.charAt(0)==="#")continue;const c=d.indexOf(" ");let h=c>=0?d.substring(0,c):d;h=h.toLowerCase();let u=c>=0?d.substring(c+1):"";if(u=u.trim(),h==="newmtl")s={name:u},r[u]=s;else if(h==="ka"||h==="kd"||h==="ks"||h==="ke"){const f=u.split(n,3);s[h]=[parseFloat(f[0]),parseFloat(f[1]),parseFloat(f[2])]}else s[h]=u}const a=new rt(this.resourcePath||i,this.materialOptions);return a.setCrossOrigin(this.crossOrigin),a.setManager(this.manager),a.setMaterials(r),a}}class rt{constructor(e="",i={}){this.baseUrl=e,this.options=i,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.crossOrigin="anonymous",this.side=this.options.side!==void 0?this.options.side:THREE.FrontSide,this.wrap=this.options.wrap!==void 0?this.options.wrap:THREE.RepeatWrapping}setCrossOrigin(e){return this.crossOrigin=e,this}setManager(e){this.manager=e}setMaterials(e){this.materialsInfo=this.convert(e),this.materials={},this.materialsArray=[],this.nameLookup={}}convert(e){if(!this.options)return e;const i={};for(const t in e){const s=e[t],n={};i[t]=n;for(const r in s){let a=!0,l=s[r];const d=r.toLowerCase();switch(d){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(l=[l[0]/255,l[1]/255,l[2]/255]),this.options&&this.options.ignoreZeroRGBs&&l[0]===0&&l[1]===0&&l[2]===0&&(a=!1);break}a&&(n[d]=l)}}return i}preload(){for(const e in this.materialsInfo)this.create(e)}getIndex(e){return this.nameLookup[e]}getAsArray(){let e=0;for(const i in this.materialsInfo)this.materialsArray[e]=this.create(i),this.nameLookup[i]=e,e++;return this.materialsArray}create(e){return this.materials[e]===void 0&&this.createMaterial_(e),this.materials[e]}createMaterial_(e){const i=this,t=this.materialsInfo[e],s={name:e,side:this.side};function n(a,l){return typeof l!="string"||l===""?"":/^https?:\/\//i.test(l)?l:a+l}function r(a,l){if(s[a])return;const d=i.getTextureParams(l,s),c=i.loadTexture(n(i.baseUrl,d.url));c.repeat.copy(d.scale),c.offset.copy(d.offset),c.wrapS=i.wrap,c.wrapT=i.wrap,(a==="map"||a==="emissiveMap")&&(c.encoding=THREE.sRGBEncoding),s[a]=c}for(const a in t){const l=t[a];let d;if(l!=="")switch(a.toLowerCase()){case"kd":s.color=new THREE.Color().fromArray(l).convertSRGBToLinear();break;case"ks":s.specular=new THREE.Color().fromArray(l).convertSRGBToLinear();break;case"ke":s.emissive=new THREE.Color().fromArray(l).convertSRGBToLinear();break;case"map_kd":r("map",l);break;case"map_ks":r("specularMap",l);break;case"map_ke":r("emissiveMap",l);break;case"norm":r("normalMap",l);break;case"map_bump":case"bump":r("bumpMap",l);break;case"map_d":r("alphaMap",l),s.transparent=!0;break;case"ns":s.shininess=parseFloat(l);break;case"d":d=parseFloat(l),d<1&&(s.opacity=d,s.transparent=!0);break;case"tr":d=parseFloat(l),this.options&&this.options.invertTrProperty&&(d=1-d),d>0&&(s.opacity=1-d,s.transparent=!0);break}}return this.materials[e]=new THREE.MeshPhongMaterial(s),this.materials[e]}getTextureParams(e,i){const t={scale:new THREE.Vector2(1,1),offset:new THREE.Vector2(0,0)},s=e.split(/\s+/);let n;return n=s.indexOf("-bm"),n>=0&&(i.bumpScale=parseFloat(s[n+1]),s.splice(n,2)),n=s.indexOf("-s"),n>=0&&(t.scale.set(parseFloat(s[n+1]),parseFloat(s[n+2])),s.splice(n,4)),n=s.indexOf("-o"),n>=0&&(t.offset.set(parseFloat(s[n+1]),parseFloat(s[n+2])),s.splice(n,4)),t.url=s.join(" ").trim(),t}loadTexture(e,i,t,s,n){const r=this.manager!==void 0?this.manager:THREE.DefaultLoadingManager;let a=r.getHandler(e);a===null&&(a=new THREE.TextureLoader(r)),a.setCrossOrigin&&a.setCrossOrigin(this.crossOrigin);const l=a.load(e,t,s,n);return i!==void 0&&(l.mapping=i),l}}const _e={type:"change"},J={type:"start"},Te={type:"end"};class at extends THREE.EventDispatcher{constructor(e,i){super(),i===void 0&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),i===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=i,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new THREE.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:THREE.MOUSE.ROTATE,MIDDLE:THREE.MOUSE.DOLLY,RIGHT:THREE.MOUSE.PAN},this.touches={ONE:THREE.TOUCH.ROTATE,TWO:THREE.TOUCH.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(o){o.addEventListener("keydown",fe),this._domElementKeyEvents=o},this.saveState=function(){t.target0.copy(t.target),t.position0.copy(t.object.position),t.zoom0=t.object.zoom},this.reset=function(){t.target.copy(t.target0),t.object.position.copy(t.position0),t.object.zoom=t.zoom0,t.object.updateProjectionMatrix(),t.dispatchEvent(_e),t.update(),n=s.NONE},this.update=function(){const o=new THREE.Vector3,g=new THREE.Quaternion().setFromUnitVectors(e.up,new THREE.Vector3(0,1,0)),T=g.clone().invert(),C=new THREE.Vector3,S=new THREE.Quaternion,V=2*Math.PI;return function(){const Ee=t.object.position;o.copy(Ee).sub(t.target),o.applyQuaternion(g),a.setFromVector3(o),t.autoRotate&&n===s.NONE&&$(R()),t.enableDamping?(a.theta+=l.theta*t.dampingFactor,a.phi+=l.phi*t.dampingFactor):(a.theta+=l.theta,a.phi+=l.phi);let k=t.minAzimuthAngle,O=t.maxAzimuthAngle;return isFinite(k)&&isFinite(O)&&(k<-Math.PI?k+=V:k>Math.PI&&(k-=V),O<-Math.PI?O+=V:O>Math.PI&&(O-=V),k<=O?a.theta=Math.max(k,Math.min(O,a.theta)):a.theta=a.theta>(k+O)/2?Math.max(k,a.theta):Math.min(O,a.theta)),a.phi=Math.max(t.minPolarAngle,Math.min(t.maxPolarAngle,a.phi)),a.makeSafe(),a.radius*=d,a.radius=Math.max(t.minDistance,Math.min(t.maxDistance,a.radius)),t.enableDamping===!0?t.target.addScaledVector(c,t.dampingFactor):t.target.add(c),o.setFromSpherical(a),o.applyQuaternion(T),Ee.copy(t.target).add(o),t.object.lookAt(t.target),t.enableDamping===!0?(l.theta*=1-t.dampingFactor,l.phi*=1-t.dampingFactor,c.multiplyScalar(1-t.dampingFactor)):(l.set(0,0,0),c.set(0,0,0)),d=1,h||C.distanceToSquared(t.object.position)>r||8*(1-S.dot(t.object.quaternion))>r?(t.dispatchEvent(_e),C.copy(t.object.position),S.copy(t.object.quaternion),h=!1,!0):!1}}(),this.dispose=function(){t.domElement.removeEventListener("contextmenu",me),t.domElement.removeEventListener("pointerdown",de),t.domElement.removeEventListener("pointercancel",ue),t.domElement.removeEventListener("wheel",pe),t.domElement.removeEventListener("pointermove",G),t.domElement.removeEventListener("pointerup",X),t._domElementKeyEvents!==null&&t._domElementKeyEvents.removeEventListener("keydown",fe)};const t=this,s={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let n=s.NONE;const r=1e-6,a=new THREE.Spherical,l=new THREE.Spherical;let d=1;const c=new THREE.Vector3;let h=!1;const u=new THREE.Vector2,f=new THREE.Vector2,v=new THREE.Vector2,b=new THREE.Vector2,p=new THREE.Vector2,y=new THREE.Vector2,E=new THREE.Vector2,x=new THREE.Vector2,_=new THREE.Vector2,w=[],A={};function R(){return 2*Math.PI/60/60*t.autoRotateSpeed}function P(){return Math.pow(.95,t.zoomSpeed)}function $(o){l.theta-=o}function j(o){l.phi-=o}const I=function(){const o=new THREE.Vector3;return function(T,C){o.setFromMatrixColumn(C,0),o.multiplyScalar(-T),c.add(o)}}(),F=function(){const o=new THREE.Vector3;return function(T,C){t.screenSpacePanning===!0?o.setFromMatrixColumn(C,1):(o.setFromMatrixColumn(C,0),o.crossVectors(t.object.up,o)),o.multiplyScalar(T),c.add(o)}}(),H=function(){const o=new THREE.Vector3;return function(T,C){const S=t.domElement;if(t.object.isPerspectiveCamera){const V=t.object.position;o.copy(V).sub(t.target);let U=o.length();U*=Math.tan(t.object.fov/2*Math.PI/180),I(2*T*U/S.clientHeight,t.object.matrix),F(2*C*U/S.clientHeight,t.object.matrix)}else t.object.isOrthographicCamera?(I(T*(t.object.right-t.object.left)/t.object.zoom/S.clientWidth,t.object.matrix),F(C*(t.object.top-t.object.bottom)/t.object.zoom/S.clientHeight,t.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),t.enablePan=!1)}}();function D(o){t.object.isPerspectiveCamera?d/=o:t.object.isOrthographicCamera?(t.object.zoom=Math.max(t.minZoom,Math.min(t.maxZoom,t.object.zoom*o)),t.object.updateProjectionMatrix(),h=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),t.enableZoom=!1)}function ie(o){t.object.isPerspectiveCamera?d*=o:t.object.isOrthographicCamera?(t.object.zoom=Math.max(t.minZoom,Math.min(t.maxZoom,t.object.zoom/o)),t.object.updateProjectionMatrix(),h=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),t.enableZoom=!1)}function se(o){u.set(o.clientX,o.clientY)}function Se(o){E.set(o.clientX,o.clientY)}function ne(o){b.set(o.clientX,o.clientY)}function He(o){f.set(o.clientX,o.clientY),v.subVectors(f,u).multiplyScalar(t.rotateSpeed);const g=t.domElement;$(2*Math.PI*v.x/g.clientHeight),j(2*Math.PI*v.y/g.clientHeight),u.copy(f),t.update()}function Me(o){x.set(o.clientX,o.clientY),_.subVectors(x,E),_.y>0?D(P()):_.y<0&&ie(P()),E.copy(x),t.update()}function Pe(o){p.set(o.clientX,o.clientY),y.subVectors(p,b).multiplyScalar(t.panSpeed),H(y.x,y.y),b.copy(p),t.update()}function ke(o){o.deltaY<0?ie(P()):o.deltaY>0&&D(P()),t.update()}function Oe(o){let g=!1;switch(o.code){case t.keys.UP:H(0,t.keyPanSpeed),g=!0;break;case t.keys.BOTTOM:H(0,-t.keyPanSpeed),g=!0;break;case t.keys.LEFT:H(t.keyPanSpeed,0),g=!0;break;case t.keys.RIGHT:H(-t.keyPanSpeed,0),g=!0;break}g&&(o.preventDefault(),t.update())}function oe(){if(w.length===1)u.set(w[0].pageX,w[0].pageY);else{const o=.5*(w[0].pageX+w[1].pageX),g=.5*(w[0].pageY+w[1].pageY);u.set(o,g)}}function re(){if(w.length===1)b.set(w[0].pageX,w[0].pageY);else{const o=.5*(w[0].pageX+w[1].pageX),g=.5*(w[0].pageY+w[1].pageY);b.set(o,g)}}function ae(){const o=w[0].pageX-w[1].pageX,g=w[0].pageY-w[1].pageY,T=Math.sqrt(o*o+g*g);E.set(0,T)}function $e(){t.enableZoom&&ae(),t.enablePan&&re()}function De(){t.enableZoom&&ae(),t.enableRotate&&oe()}function le(o){if(w.length==1)f.set(o.pageX,o.pageY);else{const T=W(o),C=.5*(o.pageX+T.x),S=.5*(o.pageY+T.y);f.set(C,S)}v.subVectors(f,u).multiplyScalar(t.rotateSpeed);const g=t.domElement;$(2*Math.PI*v.x/g.clientHeight),j(2*Math.PI*v.y/g.clientHeight),u.copy(f)}function ce(o){if(w.length===1)p.set(o.pageX,o.pageY);else{const g=W(o),T=.5*(o.pageX+g.x),C=.5*(o.pageY+g.y);p.set(T,C)}y.subVectors(p,b).multiplyScalar(t.panSpeed),H(y.x,y.y),b.copy(p)}function he(o){const g=W(o),T=o.pageX-g.x,C=o.pageY-g.y,S=Math.sqrt(T*T+C*C);x.set(0,S),_.set(0,Math.pow(x.y/E.y,t.zoomSpeed)),D(_.y),E.copy(x)}function Fe(o){t.enableZoom&&he(o),t.enablePan&&ce(o)}function je(o){t.enableZoom&&he(o),t.enableRotate&&le(o)}function de(o){t.enabled!==!1&&(w.length===0&&(t.domElement.setPointerCapture(o.pointerId),t.domElement.addEventListener("pointermove",G),t.domElement.addEventListener("pointerup",X)),Ue(o),o.pointerType==="touch"?ze(o):Ve(o))}function G(o){t.enabled!==!1&&(o.pointerType==="touch"?Be(o):Ie(o))}function X(o){ge(o),w.length===0&&(t.domElement.releasePointerCapture(o.pointerId),t.domElement.removeEventListener("pointermove",G),t.domElement.removeEventListener("pointerup",X)),t.dispatchEvent(Te),n=s.NONE}function ue(o){ge(o)}function Ve(o){let g;switch(o.button){case 0:g=t.mouseButtons.LEFT;break;case 1:g=t.mouseButtons.MIDDLE;break;case 2:g=t.mouseButtons.RIGHT;break;default:g=-1}switch(g){case THREE.MOUSE.DOLLY:if(t.enableZoom===!1)return;Se(o),n=s.DOLLY;break;case THREE.MOUSE.ROTATE:if(o.ctrlKey||o.metaKey||o.shiftKey){if(t.enablePan===!1)return;ne(o),n=s.PAN}else{if(t.enableRotate===!1)return;se(o),n=s.ROTATE}break;case THREE.MOUSE.PAN:if(o.ctrlKey||o.metaKey||o.shiftKey){if(t.enableRotate===!1)return;se(o),n=s.ROTATE}else{if(t.enablePan===!1)return;ne(o),n=s.PAN}break;default:n=s.NONE}n!==s.NONE&&t.dispatchEvent(J)}function Ie(o){switch(n){case s.ROTATE:if(t.enableRotate===!1)return;He(o);break;case s.DOLLY:if(t.enableZoom===!1)return;Me(o);break;case s.PAN:if(t.enablePan===!1)return;Pe(o);break}}function pe(o){t.enabled===!1||t.enableZoom===!1||n!==s.NONE||(o.preventDefault(),t.dispatchEvent(J),ke(o),t.dispatchEvent(Te))}function fe(o){t.enabled===!1||t.enablePan===!1||Oe(o)}function ze(o){switch(be(o),w.length){case 1:switch(t.touches.ONE){case THREE.TOUCH.ROTATE:if(t.enableRotate===!1)return;oe(),n=s.TOUCH_ROTATE;break;case THREE.TOUCH.PAN:if(t.enablePan===!1)return;re(),n=s.TOUCH_PAN;break;default:n=s.NONE}break;case 2:switch(t.touches.TWO){case THREE.TOUCH.DOLLY_PAN:if(t.enableZoom===!1&&t.enablePan===!1)return;$e(),n=s.TOUCH_DOLLY_PAN;break;case THREE.TOUCH.DOLLY_ROTATE:if(t.enableZoom===!1&&t.enableRotate===!1)return;De(),n=s.TOUCH_DOLLY_ROTATE;break;default:n=s.NONE}break;default:n=s.NONE}n!==s.NONE&&t.dispatchEvent(J)}function Be(o){switch(be(o),n){case s.TOUCH_ROTATE:if(t.enableRotate===!1)return;le(o),t.update();break;case s.TOUCH_PAN:if(t.enablePan===!1)return;ce(o),t.update();break;case s.TOUCH_DOLLY_PAN:if(t.enableZoom===!1&&t.enablePan===!1)return;Fe(o),t.update();break;case s.TOUCH_DOLLY_ROTATE:if(t.enableZoom===!1&&t.enableRotate===!1)return;je(o),t.update();break;default:n=s.NONE}}function me(o){t.enabled!==!1&&o.preventDefault()}function Ue(o){w.push(o)}function ge(o){delete A[o.pointerId];for(let g=0;g<w.length;g++)if(w[g].pointerId==o.pointerId){w.splice(g,1);return}}function be(o){let g=A[o.pointerId];g===void 0&&(g=new THREE.Vector2,A[o.pointerId]=g),g.set(o.pageX,o.pageY)}function W(o){const g=o.pointerId===w[0].pointerId?w[1]:w[0];return A[g.pointerId]}t.domElement.addEventListener("contextmenu",me),t.domElement.addEventListener("pointerdown",de),t.domElement.addEventListener("pointercancel",ue),t.domElement.addEventListener("wheel",pe,{passive:!1}),this.update()}}const Re={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			gl_FragColor = texture2D( tDiffuse, vUv );
			gl_FragColor.a *= opacity;


		}`};class Y{constructor(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}const lt=new THREE.OrthographicCamera(-1,1,1,-1,0,1),te=new THREE.BufferGeometry;te.setAttribute("position",new THREE.Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3));te.setAttribute("uv",new THREE.Float32BufferAttribute([0,2,0,0,2,0],2));class ct{constructor(e){this._mesh=new THREE.Mesh(te,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,lt)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class q extends Y{constructor(e,i){super(),this.textureID=i!==void 0?i:"tDiffuse",e instanceof THREE.ShaderMaterial?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=THREE.UniformsUtils.clone(e.uniforms),this.material=new THREE.ShaderMaterial({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new ct(this.material)}render(e,i,t){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=t.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(i),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}}class Ce extends Y{constructor(e,i){super(),this.scene=e,this.camera=i,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,i,t){const s=e.getContext(),n=e.state;n.buffers.color.setMask(!1),n.buffers.depth.setMask(!1),n.buffers.color.setLocked(!0),n.buffers.depth.setLocked(!0);let r,a;this.inverse?(r=0,a=1):(r=1,a=0),n.buffers.stencil.setTest(!0),n.buffers.stencil.setOp(s.REPLACE,s.REPLACE,s.REPLACE),n.buffers.stencil.setFunc(s.ALWAYS,r,4294967295),n.buffers.stencil.setClear(a),n.buffers.stencil.setLocked(!0),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(i),this.clear&&e.clear(),e.render(this.scene,this.camera),n.buffers.color.setLocked(!1),n.buffers.depth.setLocked(!1),n.buffers.stencil.setLocked(!1),n.buffers.stencil.setFunc(s.EQUAL,1,4294967295),n.buffers.stencil.setOp(s.KEEP,s.KEEP,s.KEEP),n.buffers.stencil.setLocked(!0)}}class ht extends Y{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class dt{constructor(e,i){if(this.renderer=e,i===void 0){const t=e.getSize(new THREE.Vector2);this._pixelRatio=e.getPixelRatio(),this._width=t.width,this._height=t.height,i=new THREE.WebGLRenderTarget(this._width*this._pixelRatio,this._height*this._pixelRatio),i.texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=i.width,this._height=i.height;this.renderTarget1=i,this.renderTarget2=i.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],Re===void 0&&console.error("THREE.EffectComposer relies on CopyShader"),q===void 0&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new q(Re),this.clock=new THREE.Clock}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,i){this.passes.splice(i,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const i=this.passes.indexOf(e);i!==-1&&this.passes.splice(i,1)}isLastEnabledPass(e){for(let i=e+1;i<this.passes.length;i++)if(this.passes[i].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const i=this.renderer.getRenderTarget();let t=!1;for(let s=0,n=this.passes.length;s<n;s++){const r=this.passes[s];if(r.enabled!==!1){if(r.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(s),r.render(this.renderer,this.writeBuffer,this.readBuffer,e,t),r.needsSwap){if(t){const a=this.renderer.getContext(),l=this.renderer.state.buffers.stencil;l.setFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),l.setFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}Ce!==void 0&&(r instanceof Ce?t=!0:r instanceof ht&&(t=!1))}}this.renderer.setRenderTarget(i)}reset(e){if(e===void 0){const i=this.renderer.getSize(new THREE.Vector2);this._pixelRatio=this.renderer.getPixelRatio(),this._width=i.width,this._height=i.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,i){this._width=e,this._height=i;const t=this._width*this._pixelRatio,s=this._height*this._pixelRatio;this.renderTarget1.setSize(t,s),this.renderTarget2.setSize(t,s);for(let n=0;n<this.passes.length;n++)this.passes[n].setSize(t,s)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}}new THREE.OrthographicCamera(-1,1,1,-1,0,1);const Le=new THREE.BufferGeometry;Le.setAttribute("position",new THREE.Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3));Le.setAttribute("uv",new THREE.Float32BufferAttribute([0,2,0,0,2,0],2));class ut extends Y{constructor(e,i,t,s,n){super(),this.scene=e,this.camera=i,this.overrideMaterial=t,this.clearColor=s,this.clearAlpha=n!==void 0?n:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new THREE.Color}render(e,i,t){const s=e.autoClear;e.autoClear=!1;let n,r;this.overrideMaterial!==void 0&&(r=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(e.getClearColor(this._oldClearColor),n=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(this._oldClearColor,n),this.overrideMaterial!==void 0&&(this.scene.overrideMaterial=r),e.autoClear=s}}const pt={uniforms:{tDiffuse:{value:null},resolution:{value:null},pixelSize:{value:1}},vertexShader:`

		varying highp vec2 vUv;

			void main() {

				vUv = uv;
				gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform float pixelSize;
		uniform vec2 resolution;

		varying highp vec2 vUv;

		void main(){

			vec2 dxy = pixelSize / resolution;
			vec2 coord = dxy * floor( vUv / dxy );
			gl_FragColor = texture2D(tDiffuse, coord);

		}`};(async()=>{const m=new z;document.body.appendChild(m.dom);const e=document.getElementById("canvas"),i=window.innerWidth,t=window.innerHeight,s=new THREE.Vector3(0,0,0),n=new THREE.Scene;n.background=new THREE.Color(13421772);const r=new THREE.PerspectiveCamera(100,i/t,.25,1e3);r.position.y=25,r.position.z=60,r.lookAt(s);const a=new at(r,e);a.autoRotate=!0,a.enablePan=!1,a.enableZoom=!1,a.target=s;const d=await new ot().loadAsync("pig.mtl");d.preload();const c=new nt;c.setMaterials(d);const h=await c.loadAsync("pig.obj");h.traverse(D=>{D.castShadow=!0,D.receiveShadow=!0}),n.add(h);const f=new THREE.TextureLoader().load("checker.png");f.wrapS=THREE.RepeatWrapping,f.wrapT=THREE.RepeatWrapping,f.magFilter=THREE.NearestFilter,f.repeat.set(5,5);const v=new THREE.PlaneBufferGeometry(50,50),b=new THREE.MeshPhongMaterial({map:f,side:THREE.DoubleSide}),p=new THREE.Mesh(v,b);p.rotation.x=Math.PI*-.5,p.position.x=0,p.position.y=0,p.position.z=0,p.receiveShadow=!0,n.add(p);const y=new THREE.AmbientLight(14540253);n.add(y);const E=new THREE.SpotLight(16777215,2,100,Math.PI/6,25);E.position.set(10,40,25),E.castShadow=!0,E.shadowCameraNear=2,E.shadowCameraFar=10,E.shadowCameraFov=30,E.shadowMapWidth=1024,E.shadowMapHeight=1024,E.shadowDarkness=.3,n.add(E);const x=new THREE.WebGLRenderer({antialias:!0,canvas:e});x.shadowMapEnabled=!0,x.setSize(i,t),x.setAnimationLoop(D=>{m.begin(),a.update(),x.render(n,r),A.uniforms.pixelSize.value=_.size,_.enable&&w.render(),m.end()});const _={size:8,enable:!0},w=new dt(x);w.addPass(new ut(n,r));const A=new q(pt);A.uniforms.resolution.value=new THREE.Vector2(i,t),A.uniforms.resolution.value.multiplyScalar(window.devicePixelRatio),w.addPass(A);const R=new ee,P=R.addFolder("Piggy Position");P.add(h.position,"x",-20,20),P.add(h.position,"y",-20,20),P.add(h.position,"z",-20,20),P.open();const $=R.addFolder("Piggy Spin");$.add(h.rotation,"x",0,Math.PI*2),$.add(h.rotation,"y",0,Math.PI*2),$.add(h.rotation,"z",0,Math.PI*2),$.open();const j=R.addFolder("Plane Texture");j.add(f.repeat,"x",1,10),j.add(f.repeat,"y",1,10),j.open();const I=R.addFolder("Plane Spin");I.add(p.rotation,"z",0,Math.PI*2),I.open();const F=R.addFolder("Lighting Position");F.add(E.position,"x",0,30),F.add(E.position,"y",0,100),F.add(E.position,"z",0,50),F.open();const H=R.addFolder("Pixel Shader");H.add(_,"size",2,32),H.add(_,"enable"),H.open(),window.addEventListener("resize",D=>{r.aspect=i/t,r.updateProjectionMatrix(),x.setSize(i,t),A.uniforms.resolution.value.set(i,t).multiplyScalar(window.devicePixelRatio)},!1),console.log({scene:n})})();
